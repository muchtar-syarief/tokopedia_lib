import{r as p,k as s,F as j,l as I,R as _,o as y}from"./nox_rghtApo7t.js";import{b as k,u as S}from"./nox_Q7hhk7k7e.js";import{c as L,R}from"./nox_kQkyekrkh.js";import{D as v}from"./nox_Qt7ptXtk7.js";function b(o){const l=(i,n,t)=>{t.children?t.children.forEach(r=>l(i,[...n,t.id],r)):i.push([...n,t.id])},c=[];return o==null||o.forEach(i=>l(c,[],i)),c}const A=L(o=>{const{sender:l}=k(),{sender:c}=k();return{list:[],pendingInitEffect:!1,initEffect:(i,n)=>{o(t=>({...t,pendingInitEffect:!0,list:[]})),l({method:"get",path:"v1/product/category",params:{is_public:!1,marketplace:"shopee",namespace:i}},{onError:()=>{o(t=>({...t,pendingInitEffect:!1}))},onSuccess:t=>{if(t){t.length||o(a=>({...a,pendingInitEffect:!1,list:[]}));const r=t.map(a=>({productCount:a.count,shopeeCategoryId:a._id,shopeeCategoryName:a.name,tokopediaCategoryIds:[]}));o(a=>({...a,pendingInitEffect:!1,list:r})),c({method:"get",path:"tokopedia/mapper/map",params:{collection:i}},{onSuccess(a){var h;if(n){const f=b((h=n.data.categoryAllListLite)==null?void 0:h.categories);a.data.forEach(d=>{f.forEach(m=>{m.indexOf(d.tokopedia_id)>-1&&o(C=>({...C,list:C.list.map(g=>(g.shopeeCategoryId===d.shopee_id&&(g.tokopediaCategoryIds=m),g))}))})})}}})}}})},updateSingleList:(i,n)=>{o(t=>({...t,list:t.list.map(r=>r.shopeeCategoryId==i?{...r,...n}:r)}))}}}),D=_.lazy(()=>y(()=>import("./nox_Xgrh7yehk.js"),["./nox_Xgrh7yehk.js","./nox_rghtApo7t.js","..\\css\\nox_pXXpg7rX7.css","./nox_Q7hhk7k7e.js","./nox_roAXpyQgX.js","./nox_Qeyoptr7e.js","./nox_ykrXhoohh.js","./nox_yyXeoApor.js","./nox_ypoX7ehAg.js","./nox_ehg77erhA.js","./nox_heQgkAkrk.js","./nox_yQgAApgoh.js","./nox_Qt7ptXtk7.js"],import.meta.url)),T=_.lazy(()=>y(()=>import("./nox_AeAp7kkok.js"),["./nox_AeAp7kkok.js","./nox_rghtApo7t.js","..\\css\\nox_pXXpg7rX7.css","./nox_Q7hhk7k7e.js","./nox_ehg77erhA.js","./nox_ykrXhoohh.js","./nox_heQgkAkrk.js","./nox_yyXeoApor.js","./nox_kyrpQkgte.js","./nox_hQ7Xpeppt.js","./nox_XrthAAkpQ.js","./nox_Qeyoptr7e.js"],import.meta.url)),M=_.lazy(()=>y(()=>import("./nox_teAkeottp.js"),["./nox_teAkeottp.js","./nox_rghtApo7t.js","..\\css\\nox_pXXpg7rX7.css","./nox_ykrXhoohh.js","./nox_hQ7Xpeppt.js","./nox_Q7hhk7k7e.js","./nox_yyXeoApor.js","./nox_kAretAekp.js","./nox_ypoX7ehAg.js","./nox_ehg77erhA.js","./nox_heQgkAkrk.js","./nox_pAAteykoX.js"],import.meta.url));function w(){const[o,l]=p.useState(!1),[c,i,n,t]=A(e=>[e.list,e.initEffect,e.updateSingleList,e.pendingInitEffect]),{sender:r,response:a}=S(),{sender:h,response:f}=S(),[d,m]=p.useState(null);p.useEffect(()=>{r({method:"get",path:"tokopedia/category/list"},{onSuccess:e=>{e||l(!0)}}),h({method:"get",path:"v1/product/namespace_all"},{onSuccess(e){e==null||e.forEach(u=>{u.name!=="default"&&m(u.name)})}})},[]),p.useEffect(()=>{d&&i(d,a)},[d]);const C=p.useMemo(()=>f?f.map(e=>({label:e.name,value:e.name})):[],[f]),g=()=>{var e;if(a){const u=E=>{const x={label:E.name,value:E.id};return E.children&&(x.children=E.children.map(u)),x};return((e=a.data.categoryAllListLite)==null?void 0:e.categories.map(u))||[]}return[]};return s.jsxs(j,{children:[s.jsx(p.Suspense,{fallback:s.jsx(s.Fragment,{}),children:s.jsx(D,{onFinish:()=>l(!1),open:o,onCancel:()=>l(!1)})}),s.jsx(p.Suspense,{fallback:s.jsx(I,{loading:!0}),children:s.jsx(T,{list:c,namespace:d,namespaces:C,onChangeNamespace:m,initEffect:i,listCategoryTokopedia:a})}),s.jsx(v,{dashed:!0,style:{marginBlock:"5px"}}),!t&&c.length==0?s.jsx(R,{status:"404",title:"Data not found!"}):s.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr ",gap:"12px"},children:c.map(e=>s.jsx(p.Suspense,{fallback:s.jsx(I,{loading:!0}),children:s.jsx(M,{categoriesName:e.shopeeCategoryName,productCount:e.productCount,catsValue:e.tokopediaCategoryIds,onChangeCatsValue:u=>{n(e.shopeeCategoryId,{tokopediaCategoryIds:u})},optionsCats:g()},e.shopeeCategoryId)},e.shopeeCategoryId))})]})}export{w as default};
