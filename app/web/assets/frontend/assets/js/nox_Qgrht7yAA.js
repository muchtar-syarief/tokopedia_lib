import{r as p,q as t,s as y,t as c,F as S,B as r}from"./nox_gAA7QekX7.js";import{u as i}from"./nox_kXpoQoXek.js";import{T as m}from"./nox_hpe7tttkA.js";import{S as j}from"./nox_pkproph7A.js";import{R as k,S as v}from"./nox_okXQAoykX.js";import{m as d}from"./nox_hygrohgty.js";import{R as E}from"./nox_kkygA7eXt.js";import"./nox_QXAokgyXy.js";import"./nox_tAeyAAgey.js";import"./nox_yrXtpArhg.js";import"./nox_r7Xyhreet.js";import"./nox_gQprkohkr.js";import"./nox_orXkthgtX.js";import"./nox_prooQetr7.js";import"./nox_XeXA7AkyX.js";function N(e){const[s,n]=p.useState(!1),{sender:u}=i(),{sender:g}=i(),{sender:l,pending:h}=i(),f=()=>{l({method:"put",path:"tokopedia/mapper/map",payload:e.list.map(a=>({shopee_id:a.shopeeCategoryId,tokopedia_id:a.tokopediaCategoryIds.map(Number)[a.tokopediaCategoryIds.length-1]}))})},x=()=>{l({method:"put",path:"tokopedia/mapper/map",payload:e.list.map(a=>({shopee_id:a.shopeeCategoryId,tokopedia_id:0}))},{onSuccess(){d.success("Update data success!")},onError(){d.error("Update data error!")}}),e.namespace&&e.initEffect(e.namespace,e.listCategoryTokopedia)},C=()=>{!s&&e.namespace&&(n(!0),u({method:"put",path:"tokopedia/mapper/autosuggest",params:{collection:e.namespace}}))};return p.useEffect(()=>{const a=setInterval(()=>{if(!s)return e.namespace&&!s&&e.initEffect(e.namespace,e.listCategoryTokopedia),clearInterval(a);g({method:"get",path:"tokopedia/mapper/autosuggest"},{onSuccess:o=>{(o==null?void 0:o.status)==="STOPPED"&&n(!1)},onError:o=>{n(!1),console.log(o)}})},1e3);return()=>clearInterval(a)},[s]),t.jsx(y,{size:"small",title:t.jsx(m.Text,{children:"Map Category From Shopee to Tokopedia"}),children:t.jsxs(c,{style:{justifyContent:"space-between",alignItems:"end"},children:[t.jsxs(S,{style:{rowGap:"5px"},children:[t.jsx(m.Text,{children:"Collections :"}),t.jsx(j,{style:{width:"300px"},placeholder:"Choose Collection",value:e.namespace,onChange:e.onChangeNamespace,options:e.namespaces})]}),t.jsxs(c,{style:{rowGap:"5px",justifyContent:"flex-end"},children:[t.jsx(r,{loading:s,disabled:s,onClick:C,icon:t.jsx(E,{rev:"suggest"}),children:"Use Suggest"}),t.jsx(r,{style:{backgroundColor:"#005246"},type:"primary",onClick:x,icon:t.jsx(k,{rev:"reset"}),children:"Reset All"}),t.jsx(r,{loading:h,onClick:f,type:"primary",icon:t.jsx(v,{rev:"save"}),children:"Save Mapping"})]})]})})}export{N as default};
