import{r as c,q as s,F as j,s as I,R as _,v as y}from"./nox_gAA7QekX7.js";import{a as k,u as S}from"./nox_kXpoQoXek.js";import{c as L}from"./nox_7ooQXrXkg.js";import{D as v}from"./nox_hhAgXQote.js";import{R}from"./nox_ypeeArAXr.js";function A(o){const l=(i,n,t)=>{t.children?t.children.forEach(r=>l(i,[...n,t.id],r)):i.push([...n,t.id])},p=[];return o==null||o.forEach(i=>l(p,[],i)),p}const b=L(o=>{const{sender:l}=k(),{sender:p}=k();return{list:[],pendingInitEffect:!1,initEffect:(i,n)=>{o(t=>({...t,pendingInitEffect:!0,list:[]})),l({method:"get",path:"v1/product/category",params:{is_public:!1,marketplace:"shopee",namespace:i,kota:"",pmax:0,pmin:0}},{onError:()=>{o(t=>({...t,pendingInitEffect:!1}))},onSuccess:t=>{if(t){t.length||o(a=>({...a,pendingInitEffect:!1,list:[]}));const r=t.map(a=>({productCount:a.count,shopeeCategoryId:a._id,shopeeCategoryName:a.name,tokopediaCategoryIds:[]}));o(a=>({...a,pendingInitEffect:!1,list:r})),p({method:"get",path:"tokopedia/mapper/map",params:{collection:i}},{onSuccess(a){var h;if(n){const f=A((h=n.data.categoryAllListLite)==null?void 0:h.categories);a.data.forEach(d=>{f.forEach(m=>{m.indexOf(d.tokopedia_id)>-1&&o(C=>({...C,list:C.list.map(g=>(g.shopeeCategoryId===d.shopee_id&&(g.tokopediaCategoryIds=m),g))}))})})}}})}}})},updateSingleList:(i,n)=>{o(t=>({...t,list:t.list.map(r=>r.shopeeCategoryId==i?{...r,...n}:r)}))}}}),D=_.lazy(()=>y(()=>import("./nox_hrhQAt7eg.js"),["./nox_hrhQAt7eg.js","./nox_gAA7QekX7.js","..\\css\\nox_rpgphkpyA.css","./nox_kXpoQoXek.js","./nox_AXXyeXAgr.js","./nox_XeXA7AkyX.js","./nox_AAgttrXkQ.js","./nox_orXkthgtX.js","./nox_r7Xyhreet.js","./nox_7yoQkAXkr.js","./nox_QXAokgyXy.js","./nox_hpe7tttkA.js","./nox_tAeyAAgey.js","./nox_yrXtpArhg.js","./nox_ygQegetAr.js","./nox_prooQetr7.js","./nox_hhAgXQote.js"],import.meta.url)),T=_.lazy(()=>y(()=>import("./nox_Qgrht7yAA.js"),["./nox_Qgrht7yAA.js","./nox_gAA7QekX7.js","..\\css\\nox_rpgphkpyA.css","./nox_kXpoQoXek.js","./nox_hpe7tttkA.js","./nox_QXAokgyXy.js","./nox_tAeyAAgey.js","./nox_yrXtpArhg.js","./nox_r7Xyhreet.js","./nox_pkproph7A.js","./nox_gQprkohkr.js","./nox_orXkthgtX.js","./nox_prooQetr7.js","./nox_okXQAoykX.js","./nox_hygrohgty.js","./nox_XeXA7AkyX.js","./nox_kkygA7eXt.js"],import.meta.url)),M=_.lazy(()=>y(()=>import("./nox_r7kpgkoeg.js"),["./nox_r7kpgkoeg.js","./nox_gAA7QekX7.js","..\\css\\nox_rpgphkpyA.css","./nox_orXkthgtX.js","./nox_gQprkohkr.js","./nox_QXAokgyXy.js","./nox_kXpoQoXek.js","./nox_prooQetr7.js","./nox_XAykyghge.js","./nox_7yoQkAXkr.js","./nox_hpe7tttkA.js","./nox_tAeyAAgey.js","./nox_yrXtpArhg.js","./nox_r7Xyhreet.js","./nox_o7rkhtert.js"],import.meta.url));function O(){const[o,l]=c.useState(!1),[p,i,n,t]=b(e=>[e.list,e.initEffect,e.updateSingleList,e.pendingInitEffect]),{sender:r,response:a}=S(),{sender:h,response:f}=S(),[d,m]=c.useState(null);c.useEffect(()=>{r({method:"get",path:"tokopedia/category/list"},{onSuccess:e=>{e||l(!0)}}),h({method:"get",path:"v1/product/namespace_all"},{onSuccess(e){e==null||e.forEach(u=>{u.name!=="default"&&m(u.name)})}})},[]),c.useEffect(()=>{d&&i(d,a)},[d]);const C=c.useMemo(()=>f?f.map(e=>({label:e.name,value:e.name})):[],[f]),g=()=>{var e;if(a){const u=E=>{const x={label:E.name,value:E.id};return E.children&&(x.children=E.children.map(u)),x};return((e=a.data.categoryAllListLite)==null?void 0:e.categories.map(u))||[]}return[]};return s.jsxs(j,{children:[s.jsx(c.Suspense,{fallback:s.jsx(s.Fragment,{}),children:s.jsx(D,{onFinish:()=>l(!1),open:o,onCancel:()=>l(!1)})}),s.jsx(c.Suspense,{fallback:s.jsx(I,{loading:!0}),children:s.jsx(T,{list:p,namespace:d,namespaces:C,onChangeNamespace:m,initEffect:i,listCategoryTokopedia:a})}),s.jsx(v,{dashed:!0,style:{marginBlock:"5px"}}),!t&&p.length==0?s.jsx(R,{status:"404",title:"Data not found!"}):s.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr ",gap:"12px"},children:p.map(e=>s.jsx(c.Suspense,{fallback:s.jsx(I,{loading:!0}),children:s.jsx(M,{categoriesName:e.shopeeCategoryName,productCount:e.productCount,catsValue:e.tokopediaCategoryIds,onChangeCatsValue:u=>{n(e.shopeeCategoryId,{tokopediaCategoryIds:u})},optionsCats:g()},e.shopeeCategoryId)},e.shopeeCategoryId))})]})}export{O as default};
