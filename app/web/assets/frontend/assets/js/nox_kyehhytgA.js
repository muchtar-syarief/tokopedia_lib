import{r as c,b as t,j as r,F as k,y as d,B as i,C as v}from"./nox_pyXA7rrAA.js";import{u as l}from"./nox_hAototeho.js";import{T as m}from"./nox_Qp7rpthge.js";import{S as x}from"./nox_rtyoeAyo7.js";import{R as I,S as T}from"./nox_eAoyogQ7X.js";import{m as g}from"./nox_AX77QyXto.js";import{R as E}from"./nox_opgr7ehhQ.js";import"./nox_yp7yprhk7.js";import"./nox_Ap7oAXApA.js";import"./nox_hkyyy7koe.js";import"./nox_7XQAprAhh.js";import"./nox_hgeAQoQoA.js";import"./nox_ogAoghAQ7.js";function N(e){const[o,n]=c.useState(!1),{sender:u}=l(),{sender:h}=l(),{sender:p,pending:f}=l(),C=()=>{p({method:"put",path:"tokopedia/mapper/map",payload:e.list.map(a=>({shopee_id:a.shopeeCategoryId,tokopedia_id:a.tokopediaCategoryIds.map(Number)[a.tokopediaCategoryIds.length-1]}))})},y=()=>{p({method:"put",path:"tokopedia/mapper/map",payload:e.list.map(a=>({shopee_id:a.shopeeCategoryId,tokopedia_id:0}))},{onSuccess(){g.success("Update data success!")},onError(){g.error("Update data error!")}}),e.namespace&&e.initEffect(e.namespace,e.listCategoryTokopedia)},S=()=>{!o&&e.namespace&&(n(!0),u({method:"put",path:"tokopedia/mapper/autosuggest",params:{collection:e.namespace}}))};return c.useEffect(()=>{const a=setInterval(()=>{if(!o)return e.namespace&&!o&&e.initEffect(e.namespace,e.listCategoryTokopedia),clearInterval(a);h({method:"get",path:"tokopedia/mapper/autosuggest"},{onSuccess:s=>{(s==null?void 0:s.status)==="STOPPED"&&n(!1)},onError:s=>{n(!1),console.log(s)}})},1e3);return()=>clearInterval(a)},[o]),t(v,{size:"small",title:t(m.Text,{children:"Map Category From Shopee to Tokopedia"}),children:r(d,{style:{justifyContent:"space-between",alignItems:"end"},children:[r(k,{style:{rowGap:"5px"},children:[t(m.Text,{children:"Collections :"}),t(x,{style:{width:"300px"},placeholder:"Choose Collection",value:e.namespace,onChange:e.onChangeNamespace,options:e.namespaces})]}),r(d,{style:{rowGap:"5px",justifyContent:"flex-end"},children:[t(i,{loading:o,disabled:o,onClick:S,icon:t(E,{rev:"suggest"}),children:"Use Suggest"}),t(i,{style:{backgroundColor:"#005246"},type:"primary",onClick:y,icon:t(I,{rev:"reset"}),children:"Reset All"}),t(i,{loading:f,onClick:C,type:"primary",icon:t(T,{rev:"save"}),children:"Save Mapping"})]})]})})}export{N as default};
